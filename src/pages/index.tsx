/**
 * The 'index' page is the main page for this site.  If the user is signed out, we
 * will show a landing page.  If a student is logged in, they should see '_student.tsx'
 * If an instructor is logged in, they should see '_instructor.tsx'.
 **/
import { isStudent } from '@/lib/util';
import type { NextPage } from 'next';
import { useSession } from 'next-auth/react';
import Head from 'next/head';
import Instructor from './_instructor';
import Landing from './_landing';
import Student from './_student';

const Index: NextPage = () => {
  const { data: session, status } = useSession()
  const loading = status === "loading";

  return (
    <>
      <Head>
        <title>spatial skills test</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {
        loading ? (
          <p>loading... {/* TODO: draw some spinner element or something */}</p>
        ) : (
          session ? (
            isStudent(session) ? (
              <Student session={session} />
            ) : (
              <Instructor session={session} />
            )
          ) : (
            <Landing />
          )
        )
      }
    </>
  )
};

export default Index
